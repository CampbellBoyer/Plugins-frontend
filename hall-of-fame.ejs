<!DOCTYPE html>
<html>
<head>
  <title>Hall of Fame</title>
  <%- include('header'); %>
</head>
<body>
  <%- include('top-navigation'); %>      
<div class="uk-hidden@m">
<br><br><br><br><br><br>
</div>

<div id="app">
<div class="uk-padding uk-clearfix">
<h3 class="uk-position-relative uk-margin uk-margin-right uk-float-left norwester">Hall of Fame</h3>
<div class="uk-position-relative uk-float-right"><button class="uk-button button-dk" href="#nomination-modal" uk-toggle>Nominate Someone</button></div>

<div id="nomination-modal" uk-modal>
    <div class="uk-modal-dialog uk-modal-body fog">
      <button class="uk-modal-close-default" type="button" uk-close></button>
        <h2 class="uk-modal-title">Submit a Nomination</h2>
        <form>
          <div class="uk-margin">
            <span class="profile-label">*Alumnist Name</span>
            <input class="uk-input" type="text" v-model="nominee_name">
          </div>
          <div class="uk-margin">
            <span class="profile-label">*Graduation Year</span><br>
          <select class="uk-select uk-width-small" v-model="nominee_graduation_year">
            <option></option>
            <option>	2019	</option>
            <option>	2018	</option>
            <option>	2017	</option>
            <option>	2016	</option>
            <option>	2015	</option>
            <option>	2914	</option>
            <option>	2013	</option>
            <option>	2012	</option>
            <option>	2011	</option>
            <option>	2010	</option>
            <option>	2009	</option>
            <option>	2008	</option>
            <option>	2007	</option>
            <option>	2006	</option>
            <option>	2005	</option>
            <option>	2004	</option>
            <option>	2003	</option>
            <option>	2002	</option>
            <option>	2001	</option>
            <option>	2000	</option>
            <option>	1999	</option>
            <option>	1998	</option>
            <option>	1997	</option>
            <option>	1996	</option>
            <option>	1995	</option>
            <option>	1994	</option>
            <option>	1993	</option>
            <option>	1992	</option>
            <option>	1991	</option>
            <option>	1990	</option>
            <option>	1989	</option>
            <option>	1988	</option>
            <option>	1987	</option>
            <option>	1986	</option>
            <option>	1985	</option>
            <option>	1984	</option>
            <option>	1983	</option>
            <option>	1982	</option>
            <option>	1981	</option>
            <option>	1980	</option>
            <option>	1979	</option>
            <option>	1978	</option>
            <option>	1977	</option>
            <option>	1976	</option>
            <option>	1975	</option>
            <option>	1974	</option>
            <option>	1973	</option>
            <option>	1972	</option>
            <option>	1971	</option>
            <option>	1970	</option>
            <option>	1969	</option>
            <option>	1968	</option>
            <option>	1967	</option>
            <option>	1966	</option>
            <option>	1965	</option>
            <option>	1964	</option>
            <option>	1963	</option>
            <option>	1962	</option>
            <option>	1961	</option>
            <option>	1960	</option>
            <option>	1959	</option>
            <option>	1958	</option>
            <option>	1957	</option>
            <option>	1956	</option>
            <option>	1955	</option>
            <option>	1954	</option>
            <option>	1953	</option>
            <option>	1952	</option>
            <option>	1951	</option>
            <option>	1950	</option>
            <option>	1949	</option>
            <option>	1948	</option>
            <option>	1947	</option>
            <option>	1946	</option>
            <option>	1945	</option>
            <option>	1944	</option>
            <option>	1943	</option>
            <option>	1942	</option>
            <option>	1941	</option>
            <option>	1940	</option>
            <option>	1939	</option>
            <option>	1938	</option>
            <option>	1937	</option>
            <option>	1936	</option>
            <option>	1935	</option>
            <option>	1934	</option>
            <option>	1933	</option>
            <option>	1932	</option>
            <option>	1931	</option>
            <option>	1930	</option>
            <option>	1929	</option>
            <option>	1928	</option>
            <option>	1927	</option>
            <option>	1926	</option>
            <option>	1925	</option>
            <option>	1924	</option>
            <option>	1923	</option>
            <option>	1922	</option>
            <option>	1921	</option>
            <option>	1920	</option>
          </select>
          </div>

          <div class="uk-margin">
            <span class="profile-label">*Reason for Nominating</span>
            <textarea class="uk-textarea" rows="5" placeholder="Enter a reason for nominating this person" v-model="nomination_reason"></textarea>
          </div>
        </form>

        <p class="uk-text-left">
            <button class="uk-button button-dk" type="button" v-on:click="submitNomination">Save</button>
            <button class="uk-button button-lt uk-modal-close" type="button">Cancel</button>
        </p>
    </div>
</div>
</div>

<!-- Here is where the gallery begins -->
<div class="uk-margin-right uk-margin-left">

  <div class="uk-position-relative uk-visible-toggle uk-light" tabindex="-1" uk-slider>
      <ul class="uk-slider-items uk-child-width-1-2@s uk-child-width-1-3@m">
          <li v-for="user in users" :key="user.id">
              <div class="uk-height-large uk-cover-container">
              <img v-bind:src="'/api/photo/' + user.profilePhotoRef" uk-cover>
              </div>
              <div class="black uk-text-center"><h5 id="hof_name" class="norwester uk-padding-small">{{ user.name }}</h5></div>
          </li>
        </ul>
      <a class="uk-position-center-left uk-position-small uk-hidden-hover" href="#" uk-slidenav-previous uk-slider-item="previous"></a>
      <a class="uk-position-center-right uk-position-small uk-hidden-hover" href="#" uk-slidenav-next uk-slider-item="next"></a>

  </div>

</div>

<div class="uk-margin-large"></div>
</div>
<script type="text/javascript">
  var app = new Vue({
    el: '#app',
    data: {
      users: <%- JSON.stringify(users) %>,
      nominee_name: '',
      nominee_graduation_year: undefined,
      nomination_reason: ''
    },
    methods: {
        submitNomination: function() {
            var validationMessage = '';
            if (!this.nominee_name) {
                validationMessage += 'You must specify a nominee to submit a nomination.\n';
            }
            if (!this.nominee_graduation_year) {
                validationMessage += 'You must specify the nominee\'s graduation year to submit a nomination.\n';
            }
            if (!this.nomination_reason) {
                validationMessage += 'You must specify a reason for your nomination.'
            }
            if (validationMessage) {
                alert(validationMessage);
                return;
            }
            
            var nominationRequest = {
                nominee_name: this.nominee_name,
                nominee_graduation_year: parseInt(this.nominee_graduation_year),
                nomination_reason: this.nomination_reason
            };
            var self = this;
            axios.post('/api/hof-nomination', nominationRequest)
                .then(function(data) {
                    self.nominee_name = '';
                    self.nominee_graduation_year = undefined;
                    self.nomination_reason = '';
                    UIkit.modal('#nomination-modal').hide();
                })
                .catch(function(err) {
                    alert('There was an issue saving your nomination request. Please try again or contact an administrator')
                });
        }
    }
  });
</script>
</body>
</html>
