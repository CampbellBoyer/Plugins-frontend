<!DOCTYPE html>
<html>
<head>
  <title>Membership Types</title>
  <%- include('header'); %>
  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=<%= paypalClientId %>&disable-funding=credit,card"></script>
</head>
    <body>
<div class="uk-position-small uk-position-top-left">
<a href="/membership-options"> <span uk-icon="arrow-left"></span>Back to Membership Options</a>
</div><br>
  <!-- Membership Options -->
  <div class="uk-padding uk-position-relative uk-position-small uk-position-top-center uk-text-center">
  <h3 id="alumni_name" class="norwester">Fern Creek <br> Alumni Association</h3>
  </div>
<hr class="uk-divider-icon">
<h2 class="uk-text-center tight">Membership Types</h2>
<h5 class="uk-text-center tight">Select a membership type to purchase one.</h5>
<div class="uk-padding-large">
<div class="uk-child-width-1-3@m" uk-grid>

  <!-- Membership Type # 1 -->
  <div>
    <div class="uk-card-small uk-card-default">
        <div class="uk-card-header"><h2 class="uk-card-title uk-text-center">Annual</h2></div>
        <div class="uk-card-body">
        <ul>
        <li class="font-charcoal"><strong>$25 Due Today</strong></li>
        <li class="font-charcoal">Renews every 12 Months</li>
        <li class="font-charcoal">You may cancel at anytime</li>
        </div>
        <div id="purchase-type-1"></div>
    </div>
  </div>

<!-- Membership Type # 2 -->
<div>
  <div class="uk-card-small uk-card-default">
      <div class="uk-card-header"><h2 class="uk-card-title uk-text-center">Lifetime</h2></div>
      <div class="uk-card-body">
      <ul>
      <li class="font-charcoal"><strong>$275 Due Today</strong></li>
      <li class="font-charcoal">No future payment necessary</li>
      <li class="font-charcoal">Access to alumni association benefits for the rest of your life </li>
      </div>
      <div id="purchase-type-2"></div>
  </div>
</div>

<!-- Membership Type # 3 -->
<div>
  <div class="uk-card-small uk-card-default">
      <div class="uk-card-header"><h2 class="uk-card-title uk-text-center">Lifetime > 50</h2></div>
      <div class="uk-card-body">
      <ul>
      <li class="font-charcoal"><strong>$175 Due Today</strong></li>
      <li class="font-charcoal">If you graduated 50 years ago or longer, you qualify for a discounted lifetime membership</li>
      </div>
      <div id="purchase-type-3"></div>
  </div>
</div>
</div>
<a class="uk-margin-large uk-button button-lt uk-float-right" href="/profile">Skip for Now</a>
<script type="text/javascript">
  // todo: this is currently a one-time payment, recurring payment will have to be set up on the backend
  paypal.Buttons({
    createOrder: function(data, actions) {
      return actions.order.create({
        purchase_units: [{
          amount: {
            value: '25.00',
            currency: 'USD'
          }
        }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        axios.post('/api/process-membership-subscription', {
          orderId: data.orderID,
          membershipType: 'annual'
        })
          .then(function(data) {
            window.location.href = data.redirect ? data.redirect : '/profile';
          })
          .catch(function(err) {
            alert('We were unable to process your transaction. Please try again or contact an administrator.');
          });
      });
    },
    style: {
      color: 'gold',
      shape: 'rect',
      size: 'responsive',
      fundingincons: false
    }
  }).render('#purchase-type-1');

  paypal.Buttons({
    createOrder: function(data, actions) {
      return actions.order.create({
        purchase_units: [{
          amount: {
            value: '275.00',
            currency: 'USD'
          }
        }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        axios.post('/api/process-membership-subscription', {
          orderId: data.orderID,
          membershipType: 'lifetime'
        })
          .then(function(data) {
            window.location.href = data.redirect ? data.redirect : '/profile';
          })
          .catch(function(err) {
            alert('We were unable to process your transaction. Please try again or contact an administrator.');
          });
      });
    },
    style: {
      color: 'gold',
      shape: 'rect',
      size: 'responsive',
      fundingincons: false
    }
  }).render('#purchase-type-2');

  paypal.Buttons({
    createOrder: function(data, actions) {
      return actions.order.create({
        purchase_units: [{
          amount: {
            value: '175.00',
            currency: 'USD'
          }
        }]
      });
    },
    onApprove: function(data, actions) {
      return actions.order.capture().then(function(details) {
        axios.post('/api/process-membership-subscription', {
          orderId: data.orderID,
          membershipType: 'lifetime_50_plus'
        })
          .then(function(data) {
            window.location.href = data.redirect ? data.redirect : '/profile';
          })
          .catch(function(err) {
            alert('We were unable to process your transaction. Please try again or contact an administrator.');
          });
      });
    },
    style: {
      color: 'gold',
      shape: 'rect',
      size: 'responsive',
      fundingincons: false
    }
  }).render('#purchase-type-3');
</script>
</body>
</html>
