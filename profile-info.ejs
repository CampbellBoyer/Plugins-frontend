<!DOCTYPE html>
<html>
<head>
  <title>Profile Information</title>
  <%- include('header'); %>
</head>
<body>
  <div id="app">
  <!-- Sign Up -->
  <div class="uk-padding uk-position-relative uk-position-small uk-position-top-center uk-text-center">
    <h3 id="alumni_name" class="norwester">Fern Creek <br> Alumni Association</h3>
  </div>

  <div class="uk-container uk-container-expand uk-margin-large-left uk-margin-large-right uk-position-relative uk-padding-large white border-slate">
    <h3 class="uk-text-center norwester">Profile Information</h3><br><br>
  <div class="uk-grid-divider uk-child-width-expand@s" uk-grid>
  <!-- Option 1 - Photo-->
  <div class="uk-width-1-3@m">
    <h5 class="tight">1. Current Photo</h5>
    <h6>If you’d like to include a current photo of yourself, select the ‘+ Image’ button below.</h6>

    <div class="uk-position-relative uk-position-bottom-left">
      <?xml version="1.0" encoding="UTF-8"?>
      <svg width="142px" height="163px" viewBox="0 0 142 163" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <g id="Style-Guide" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round">
              <g id="single-neutral-profile-picture" transform="translate(1.000000, 0.000000)" stroke="#AFAFB7">
                  <g id="New_Symbol_1" transform="translate(35.000000, 39.200000)">
                      <circle id="Oval" cx="34.608" cy="24.521" r="22.75"></circle>
                      <path d="M70,82.271 C64.6438743,67.5577925 50.6577954,57.7652326 35,57.7652326 C19.3422046,57.7652326 5.3561257,67.5577925 0,82.271" id="Path" stroke-width="0.989"></path>
                  </g>
                  <rect id="Rectangle" x="0" y="0.7" width="140" height="161" rx="1"></rect>
                  <rect id="Rectangle" x="21" y="21.7" width="98" height="119"></rect>
              </g>
          </g>
      </svg>
    <br><br>
  <form>
      <div class="uk-margin">
          <div uk-form-custom>
              <input id="profile_photo_upload" name="profile_photo_upload" type="file">
              <button class="uk-button button-lt" type="button" tabindex="-1"><span uk-icon="plus-circle"></span> &nbsp;Image</button>
          </div>
      </div>
  </form>
  </div>
  </div>

  <!-- 2. Profile Info Form -->
    <div class="uk-width-2-3@m">
      <h5 class="tight">2. Demographics</h5>
      <h6>Required fields marked with an *. </h6>
      <form class="uk-grid-small uk-form-stacked" uk-grid>

        <!-- FIRST NAME -->
        <div class="uk-width-1-2@m">
          <label class="uk-form-label">*First Name</label>
          <div class="uk-form-controls uk-inline uk-width-1-1">
            <span class="uk-form-icon" uk-icon="icon: user"></span>
              <input id="first_name" class="uk-input border-charcoal2" type="text" v-model="user.first_name">
          </div>
        </div>

        <!-- LAST NAME -->
        <div class="uk-width-1-2@m">
          <label class="uk-form-label">*Last Name</label>
          <div class="uk-form-controls uk-inline uk-width-1-1">
            <span class="uk-form-icon" uk-icon="icon: user"></span>
              <input id="last_name" class="uk-input border-charcoal2" type="text" v-model="user.last_name">
          </div>
        </div> 

        <!-- NICKNAMES -->
        <div class="uk-width-1-2@m">
            <label class="uk-form-label">Nickname</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: user"></span>
                <input id="nickname" class="uk-input border-charcoal2" type="text" v-model="user.nicknames">
            </div>
        </div>

        <!-- MARITAL STATUS -->
        <div class="uk-width-1-2@m">
            <label class="uk-form-label">Marital Status</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <select id="marital_status" class="uk-select border-charcoal2" v-model="user.marital_status">
                <option></option>
                <option>Single</option>
                <option>Married</option>
                <option>Prefer Not To Answer</option>
              </select>
            </div>
        </div>

        <!-- HOME PHONE-->
        <div class="uk-width-1-2@m">
            <label class="uk-form-label">Home Phone #</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: receiver"></span>
              <input id="home_phone" class="uk-input border-charcoal2" placeholder="(###) ###-####" type="text" v-model="user.home_phone">
            </div>
        </div>

        <!-- MOBILE PHONE-->
        <div class="uk-width-1-2@m">
            <label class="uk-form-label">Cell Phone #</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: receiver"></span>
              <input id="cell_phone" class="uk-input border-charcoal2" placeholder="(###) ###-####" type="text" v-model="user.cell_phone">
            </div>
        </div>

        <!-- HOME ADDRESS LINE 1-->
        <div class="uk-width-1-2@m">
          <label class="uk-form-label">*Home Address Line 1</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: home"></span>
              <input id="address_line_1" class="uk-input border-charcoal2" placeholder="123 Main Street" type="text" v-model="user.address_line_1">
            </div>
        </div>

        <!-- HOME ADDRESS LINE 2-->
        <div class="uk-width-1-2@m">
          <label class="uk-form-label">*Home Address Line 2</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: home"></span>
              <input id="address_line_2" class="uk-input border-charcoal2" placeholder="Apartment B" type="text" v-model="user.address_line_2">
            </div>
        </div>

        <!-- CITY -->
        <div class="uk-width-1-2@m">
          <label class="uk-form-label">*City</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <span class="uk-form-icon" uk-icon="icon: location"></span>
              <input id="city" class="uk-input border-charcoal2" type="text" v-model="user.city">
            </div>
        </div>

        <!-- STATE -->
        <div class="uk-width-1-4@m">
          <label class="uk-form-label">*State</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <select id="state" class="uk-select border-charcoal2" v-model="user.state">
                <option value=""></option>
                <option>	AL	</option>
                <option>	AK	</option>
                <option>	AZ	</option>
                <option>	AR	</option>
                <option>	CA	</option>
                <option>	CO	</option>
                <option>	CT	</option>
                <option>	DE	</option>
                <option>	FL	</option>
                <option>	GA	</option>
                <option>	HI	</option>
                <option>	ID	</option>
                <option>	IL	</option>
                <option>	IN	</option>
                <option>	IA	</option>
                <option>	KS	</option>
                <option>	KY	</option>
                <option>	LA	</option>
                <option>	ME	</option>
                <option>	MD	</option>
                <option>	MA	</option>
                <option>	MI	</option>
                <option>	MN	</option>
                <option>	MS	</option>
                <option>	MO	</option>
                <option>	MT	</option>
                <option>	NE	</option>
                <option>	NV	</option>
                <option>	NH	</option>
                <option>	NJ	</option>
                <option>	NM	</option>
                <option>	NY	</option>
                <option>	NC	</option>
                <option>	ND	</option>
                <option>	OH	</option>
                <option>	OK	</option>
                <option>	OR	</option>
                <option>	PA	</option>
                <option>	RI	</option>
                <option>	SC	</option>
                <option>	SD	</option>
                <option>	TN	</option>
                <option>	TX	</option>
                <option>	UT	</option>
                <option>	VT	</option>
                <option>	VA	</option>
                <option>	WA	</option>
                <option>	WV	</option>
                <option>	WI	</option>
                <option>	WY	</option>
                <option>	AS	</option>
                <option>	DC	</option>
                <option>	FM	</option>
                <option>	GU	</option>
                <option>	MH	</option>
                <option>	MP	</option>
                <option>	PW	</option>
                <option>	PR	</option>
                <option>	VI	</option>
                <option>	AE	</option>
                <option>	AA	</option>
                <option>	AE	</option>
                <option>	AE	</option>
                <option>	AE	</option>
                <option>	AP	</option>
              </select>
            </div>
        </div>

        <!-- ZIP -->
        <div class="uk-width-1-4@m">
          <label class="uk-form-label">*ZIP Code</label>
            <div class="uk-form-controls uk-inline uk-width-1-1">
              <svg class="uk-form-icon icon-padding" xmlns="http://www.w3.org/2000/svg"><defs><style>.a{fill:none;stroke:#AFAFB7;stroke-linecap:round;stroke-linejoin:round;}</style></defs><title>compass-arrow</title><path class="a" d="M12.013,22.122a.5.5,0,0,1-.943-.231V12.93H2.109a.5.5,0,0,1-.231-.943L21.66,1.666a.5.5,0,0,1,.674.674Z"/></svg>
                <input id="zip_code" class="uk-input border-charcoal2" placeholder="ZIP" type="text" v-model="user.zip_code">
            </div>
        </div>
    <div class="uk-position-relative uk-margin uk-position-bottom-left"><a class="uk-button button-lt" href="/membership-options">Skip</a></div>
    <div class="uk-position-relative uk-margin uk-position-bottom-right" v-on:click="saveProfile"><a class="uk-button button-dk">Save</a></div>
</form>
</div>
</div>
</div>
</div>
<hr><hr>
<%- include('footer'); %>
<script type="text/javascript">
  var app = new Vue({
    el: '#app',
    data: {
      user: <%- JSON.stringify(user) %>
    },
    methods: {
      saveProfile: function() {
        var userPayload = Object.assign({}, this.user);
        var formData = new FormData();

        var fileUpload = $('#profile_photo_upload')[0].files[0];
        if (fileUpload) {
          if (fileUpload.size/1024/1024 > 1) {
            alert('Please keep image uploads below 1 MB. You can compress your image using www.wecompress.com if you would like to use the current selected photo.');
            return;
          }
          formData.append('profile_photo_upload', fileUpload);
        }
        
        formData.append('user', JSON.stringify(userPayload));        

        axios.post('/api/update-profile-data', formData, {
          headers: {
            'Content-Type': 'multipart/form-data'
          }
        })
          .then(function(data) {
            if (data.redirect) {
              window.location.pathname = data.redirect;
            } else {
              window.location.pathname = '/membership-options';
            }
          })
          .catch(function(err) {
            alert('There was an issue processing your request. Please try again or contact an administrator');
          });
      }
    }
  });
</script>
</body>
</html>
